<style>
    .color-chart-tabs {
        margin: 0 !important;
        list-style: none !important;
        padding: 0 0 0 0;
        overflow: visible;
        display: flex;
        flex-wrap: wrap;
    }
    .color-chart-tab {
        text-decoration: none;
        cursor: pointer;
        flex-grow: 1;
        justify-content: center;
        align-items: center;
        margin-bottom: 0;
        float: left;
        box-sizing: border-box;
        margin-right: 2px;
        line-height: 1.42857143;
        position: relative;
        display: block;
        overflow: visible;
        background: #fff;
    }
    .color-chart-tab.active {
        background: #F4F4F4;                        
    }
    .color-chart-tab.active .color-chart-tab-title {
        color: #555;
        border-bottom: 0;
    }
    .color-chart-tab-title {        
        border: 1px solid #DDDDDD;
        padding: 10px 15px !important;
        border-radius: 4px 4px 0 0;        
        color: #50b3da;
        font-size: 16px;
        white-space: nowrap;
        text-align: center;    
        width: 100%;
    }
    .color-chart-tabs-body {        
        padding-top: 10px;
    }
    .color-chart-tab-content {
        display: none;
        padding: 10px 0;
        width: 100%;
        position: relative;
    }
    .color-chart-tab-content.active {
        animation: fadeIn 0.5s;
        display: block;
    }
    .color-chart-nav {
        cursor: pointer;
        position: absolute;
        z-index: 10;
        top: 0;
        width: 35px;
        height: 100%;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
    }
    .color-chart-nav-left {
        left: 0;
        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHdpZHRoPSIxNzkyIiBoZWlnaHQ9IjE3OTIiIHZpZXdCb3g9IjAgMCAxNzkyIDE3OTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyMDMgNTQ0cTAgMTMtMTAgMjNsLTM5MyAzOTMgMzkzIDM5M3ExMCAxMCAxMCAyM3QtMTAgMjNsLTUwIDUwcS0xMCAxMC0yMyAxMHQtMjMtMTBsLTQ2Ni00NjZxLTEwLTEwLTEwLTIzdDEwLTIzbDQ2Ni00NjZxMTAtMTAgMjMtMTB0MjMgMTBsNTAgNTBxMTAgMTAgMTAgMjN6Ii8+PC9zdmc+);
    }
    .color-chart-nav-right {
        right: 0;
        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHdpZHRoPSIxNzkyIiBoZWlnaHQ9IjE3OTIiIHZpZXdCb3g9IjAgMCAxNzkyIDE3OTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTExNzEgOTYwcTAgMTMtMTAgMjNsLTQ2NiA0NjZxLTEwIDEwLTIzIDEwdC0yMy0xMGwtNTAtNTBxLTEwLTEwLTEwLTIzdDEwLTIzbDM5My0zOTMtMzkzLTM5M3EtMTAtMTAtMTAtMjN0MTAtMjNsNTAtNTBxMTAtMTAgMjMtMTB0MjMgMTBsNDY2IDQ2NnExMCAxMCAxMCAyM3oiLz48L3N2Zz4=);
    }
    .color-chart-slides {
        padding: 0 35px;
        word-break: break-work;
    }
    .color-chart-slide {
        display: none;
    }
    .color-chart-slide.active {
        display: block;
    }
    .color-chart-slide-item {
        -webkit-animation-name: slide-fade;
        animation-name: slide-fade;
        -webkit-animation-duration: 1.5s;
        animation-duration: 1.5s;
        image-rendering: -webkit-optimize-contrast;
        text-align: center;
        position: relative;
    }
    @-webkit-keyframes slide-fade {
        from {
            opacity: 0.4;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes slide-fade {
        from {
            opacity: 0.4;
        }

        to {
            opacity: 1;
        }
    }
    .color-chart-slide-item-img {
        margin: 0 auto;
        max-width: 100%;
        opacity: 1;
        transition: opacity 300ms;
        vertical-align: middle;
        border: 0;
        display: inline;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        user-select: none;
    }
    .color-chart-dots {
        margin-top: 10px;
        text-align: center;
    }
    .color-chart-dot {
        cursor: pointer;
        display: inline-block;
        height: 14px;
        width: 14px;
        border-radius: 100%;
        margin-left: 5px;
        background-color: #bbbbbb;
    }
    .color-chart-dot.active {
        background-color: #717171;
    }
    .color-chart-dot:first-child {
        margin-left: 0px;
    }
    .color-chart-video-wrapper {
        padding-bottom: 56.25%;
        position: relative;
        height: 0;
        opacity: 1;
        transition: opacity 300ms;
    }
    .color-chart-video {        
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
</style>
<div>
    <ul class="color-chart-tabs">        
    </ul>
    <div class="color-chart-tabs-body">        
    </div>
</div>
<script>
    let chartIdx = 0;
    function scriptLoader(scripts, callback) {

        var count = scripts.length;

        function urlCallback(url) {
            return function () {                
                console.log(url + ' was loaded (' + --count + ' more scripts remaining).');
                if (count < 1) {
                    callback();
                }
            };
        }

        function loadScript(url) {
            var s = document.createElement('script');
            s.setAttribute('src', url);
            s.onload = urlCallback(url);
            document.head.appendChild(s);
        }

        for (var script of scripts) {
            loadScript(script);
        }
    };
    function onChartFocus() {
        $(".color-chart-slide.active").removeClass("active");
        $(".color-chart-slide").eq(chartIdx).addClass("active");
        $(".color-chart-dot.active").removeClass("active");
        $(".color-chart-dot").eq(chartIdx).addClass("active");
    }
    function initialChart() {
        fetch("/content/data/color-chart.json")
        .then(r=>r.json())
        .then(d=>{
            console.log(d);
            if (d.tabs)  {
                let htmlTitle = `<li class="color-chart-tab active">
                    <div class="color-chart-tab-title">${d.tabs[0].title}</div>
                </li>
                <li class="color-chart-tab">
                    <div class="color-chart-tab-title">${d.tabs[1].title}</div>
                </li>`;
                let html = `<div class="color-chart-tab-content active">
                    <div>
                        <div class="color-chart-nav color-chart-nav-left"></div>
                        <div class="color-chart-slides">`;
                let htmlDots='';
                for (let i=0; i<d.tabs[0].img.length; i++) {
                    let img = d.tabs[0].img[i];                    
                    if (i==0) {
                        html+=`<div class="color-chart-slide active">
                            <div class="color-chart-slide-item">
                                <img src="${img.link}" alt="${img.alt}" loading="lazy" class="color-chart-slide-item-img">
                            </div>
                        </div>`;
                        htmlDots+=`<div class="color-chart-dot active"></div>`;
                    } else {
                        html+=`<div class="color-chart-slide">
                            <div class="color-chart-slide-item">
                                <img src="${img.link}" alt="${img.alt}" loading="lazy" class="color-chart-slide-item-img">
                            </div>
                        </div>`;
                        htmlDots+=`<div class="color-chart-dot"></div>`;
                    }
                }
                html+=`</div><div class="color-chart-nav color-chart-nav-right"></div></div><div class="color-chart-dots">${htmlDots}</div></div>`;
                html+=`<div class="color-chart-tab-content">
                    <div class="color-chart-video-wrapper">
                        <iframe class="color-chart-video" allowfullscreen src="${d.tabs[1].link}?start=0&amp;end=0&amp;autoplay=0&amp;loop=0&amp;rel=1" frameborder="0">
                        </iframe>
                    </div>
                </div>`;
                $(".color-chart-tabs").html(htmlTitle);
                $(".color-chart-tabs-body").html(html);
            }
        })
        .catch(e=>console.log(e));

        $("body").on("click", ".color-chart-nav-left", function() {
            if (chartIdx==0) {
                chartIdx = $(".color-chart-slide").length-1;
            } else {
                chartIdx=chartIdx-1;
            }
            onChartFocus();
        });
        $("body").on("click", ".color-chart-nav-right", function() {
            if (chartIdx==$(".color-chart-slide").length-1) {
                chartIdx = 0;
            } else {
                chartIdx=chartIdx+1;
            }
            onChartFocus();
        });
        $("body").on("click", ".color-chart-dot", function() {           
            chartIdx = $(this).index();
            onChartFocus();
        });
        $("body").on("click", ".color-chart-tab", function() {
            let idx = $(this).index();
            $(".color-chart-tab-content.active").removeClass("active");
            $(".color-chart-tab-content").eq(idx).addClass("active");
            $(".color-chart-tab.active").removeClass("active");
            $(".color-chart-tab").eq(idx).addClass("active");
        })
    }
    window.addEventListener('DOMContentLoaded', (event) => {
        if (window.jQuery) {   
            initialChart();         
        } else {
            scriptLoader(['//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js'], function() {
                initialChart();
            })
        }        
    }, false);
</script>